#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ë¸Œëžœì¹˜ ë³€ê²½ì¸ì§€ í™•ì¸ ($3ì´ 1ì´ë©´ ë¸Œëžœì¹˜ ë³€ê²½)
if [ "$3" = "1" ]; then
  echo "ðŸ”„ Branch switched! Running post-checkout tasks..."
  
  # package.jsonì´ë‚˜ pnpm-lock.yamlì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
  if git diff --name-only HEAD@{1} HEAD | grep -E "(package\.json|pnpm-lock\.yaml)" > /dev/null; then
    echo "ðŸ“¦ Dependencies changed, installing..."
    pnpm install
  fi
  
  # node_modulesê°€ ì—†ìœ¼ë©´ ì„¤ì¹˜
  if [ ! -d "node_modules" ]; then
    echo "ðŸ“¦ Installing dependencies..."
    pnpm install
  fi
  
  echo "âœ… Post-checkout tasks completed!"
fi 